@*
* Copyright 2010-2014 Artima, Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*@

@import controllers.Application.latestScaladoc
@import controllers.Application.milestoneScaladoc

@combinedReleaseNotesPage("Scalactic/ScalaTest 3.1.0 Draft Release Notes") {
    <div style="text-align: left">

        <h1>ScalaTest/Scalactic 3.1.0 Draft Release Notes</h1>

        <p>
            ScalaTest/Scalactic 3.1.0 (for Scala 2.11, 2.12, and 2.13) includes the enhancements and bug fixes listed below.
            No source code using ScalaTest/Scalactic 3.0.8 should break, other than expired deprecations, but
            because this release is not binary compatible with 3.0.8), you will likely need to do a clean build to upgrade. Also,
        </p>

        <p>
            For information on how to include ScalaTest in your project, see the <a href="/install">install page</a>.
            For information on how to use <a href="http://www.scalactic.org/">Scalactic</a> in your production code,
            see its <a href="http://www.scalactic.org/install">install page</a>.
        </p>

	<br/>

	<!-- ====================================== SCALA TEST ==================================================== -->

        <hr style="height:3px;border:none;color:#333;background-color:#333;" /> <!-- ############################################### -->

	<div align="center" style="padding-top:0.8rem">
	<h1>ScalaTest</h1>
	</div>

	<hr></hr>

        <a name="scalatest_bugfixes"></a>
        <h2>Bug Fixes</h2>

        <ul>
                <li>Duplicate classes of JMock, JUnit, ScalaCheck, TestNG, EasyMock, and Selenium to <code>org.scalatestplus.xxx</code> packages, this fixes a problem for user susing these from Java.</li>
                <li>Changed <code>Framework</code> to favor <code>@@WrapWith</code> when it is available, consistent with behavior of <code>ScalaTestFramework</code> and <code>Runner</code>.</li>
                <li>Fixed javascript error in report files generated by <code>HtmlReporter</code>.</li>
                <li>Added root to the macros defined in <code>TypeMatcherMacro</code>.</li>
        </ul>


        <a name="scalatest_improvements"></a>
        <h2>Improvements</h2>

        <ul>
                <li>Changed feature to Feature and scenario to Scenario in FeatureSpec. Deprecated the lower case versions. This makes
FeatureSpec syntax more consistent internally, now that Given, When, and Then are upper cased (which was forced upon us by then being
reclaimed to be used a Scala keyword) and also externally consistent with Cucumber and Gherkin, and internally consistent with 
the upper case versions that have always been shown in our reports.</li>
        </ul>

        <a name="scalatest_deprecations"></a>
        <h2>Deprecations</h2>

        <ul>
            <li>Deprecated <code>feature</code> in favour of <code>Feature</code> in the <code>FeatureSpec</code> family of traits and classes.</li>
            <li>Deprecated <code>scenario</code> in favour of <code>Scenario</code> in the <code>FeatureSpec</code> family of traits and classes.</li>
@*
TODO: We should create a ScalaFix app for this, but we do have a support/feature2Feature.scala that does it.
*@
        </ul>

	<br/>

	<!-- ====================================== SCALACTIC ==================================================== -->

        <hr style="height:3px;border:none;color:#333;background-color:#333;" /> <!-- ############################################### -->

	<div align="center" style="padding-top:0.8rem">
	<h1>Scalactic</h1>
	</div>

	<hr></hr>

        <a name="scalactic_bugfixes"></a>

        <a name="scalactic_improvements"></a>
        <h2>Improvements</h2>

        <ul>
                <li>Added new factory methods to the companion objects of existing <code>anyvals</code> (which also appear in the companions of new anyvals added in 3.1.0):
                    <ul>
                    <li><code>ensuringValid</code> - wraps a given underlying type value with a narrower <code>anyvals</code> type value if it is
valid, else throws <code>AssertionError</code>.
                    Background for the addition of these <code>ensuringValid</code> factory methods is given in Bill Venners' in <a href="https://youtu.be/keTId618iOs"><em>Hope, Faith, and Proof</em></a> talk.</li>
<li><code>fromOrElse</code> - wraps a given underlying type value with a narrower <code>anyvals</code> type value if it is valid, else
returns a given default.</li>
<li><code>goodOrElse</code> - wraps a given underlying type value with a narrower <code>anyvals</code> type value if it is valid, and returns that wrapped in
 a <code>Good</code>, else returns a <code>Bad</code> produced by passing the invalid value to a given function.</li>
<li><code>passOrElse</code> - wraps a given underlying type value with a narrower <code>anyvals</code> type value if it is valid, and returns that wrapped in
 a <code>Pass</code>, else returns a <code>Fail</code> produced by passing the invalid value to a given function.</li>
<li><code>rightOrElse</code> - wraps a given underlying type value with a narrower <code>anyvals</code> type value if it is valid, and returns that wrapped in
 a <code>Right</code>, else returns a <code>Left</code> produced by passing the invalid value to a given function.</li>
                    </ul>
     
</li>
<li>Added an <code>isValid</code> predicate method to the companion objects of existing <code>anyvals</code> (which also appears in the companions of new anyvals added in 3.1.0) that returns true if a given underlying type value is valid.</li>
@*
    Clarified for Double and Float types that NaN and NegativeInfinity are
    not valid, wherewas PositiveInfinity is. Added a PositiveInfinity constant in the
    companion objects for Pos*Double and Pos*Float.
*@
                    <li>Added an <code>ensuringValid</code> method to existing <code>anyvals</code> <em>classes</em> (<em>i.e.</em>, different from the <code>ensuringValid</code> methods added to the companion objects), which passes the underlying value to a given function that produces another value of the underlying type, and wraps that result with the narrower <code>anyvals</code> type value if it is
valid, else throws <code>AssertionError</code>.
                    Background for the addition of these <code>ensuringValid</code> transformation methods is given in Bill Venners' in <a href="https://youtu.be/keTId618iOs"><em>Hope, Faith, and Proof</em></a> talk.</li>
@*
   TODO: Verify that all the above methods were added to all the existing anyvals types (and to all new types).
*@
                <li>Added new anyvals. List them all with a little note as to what they represent. Mention these
 also get all the factory methods.</li>


         </ul>

	<br/>

	<!-- ====================================== NOTES ==================================================== -->

        <hr style="height:3px;border:none;color:#333;background-color:#333;" /> <!-- ############################################### -->


        <p>
            Visit <a href="@routes.ReleaseNotes.releaseNotesIndex">ScalaTest Release Notes</a> for links to the release notes of all previous versions, or
            step back in time by visiting the <a href="@routes.ReleaseNotes.v307">release notes for the previous version</a>.
        </p>

    </div>
@*

added:

class PosDouble

X ensuringValid
plus

object PosDouble

MinPositiveValue
PositiveInfinity
X ensuringValid
X fromOrElse
X goodOrElse
X isValid
X passOrElse
X rightOrElse
sumOf
sumOf	
widenToNonZeroDouble

posDoubleOrd got removed mysteriously. How are we doing Ords now? Oh it is called ordering.
Should put a deprecated non-implicit method in there. Hmm. That is a breaking change.
The only way I could think of this. Well I could just rewrite posDoubleOrd to ordering.

Huh, when were to and until added to PosDouble. They show up as deprecated in 3.1.0, but
don't appear in 3.0.8. Maybe they are added implicitly?

TODO: Add scaladoc for isWhole? Add Scaladoc for MinPositiveValue.

Added MinPositiveValue constants to PosDouble and PosZDouble companion objects.
    Added a pos_+ method to PosDouble that takes a PosZDouble and returns a PosDouble.

Added a pos_+ method to PosDouble. Thanks to Erik Osheim for pointing
    out that such methods are possible.

Added a posZ_* method to PosDouble that returns a PosZDouble.

Did I ever get back to this?
Added two sections that I've commented out, because I learned that I need
    to wait for FinitePosZDouble before I can add a posZ_/ method to PosDouble.
Added more commented out code because discovered will need to wait for
    FinitePosZDouble before I can add a posZ_* method to PosZDouble.
 No I did not. Could try adding it now.


Added a posZ_+ method to PosZDouble that takes and returns a PosZDouble.

    Moved PosDouble's pos_+ method to PosDouble's companion and named it sumOf.
    Moved PosDouble's pos_* method to PosZDouble's companion and named it productOf.

    Added an overloaded PosDouble.sumOf method that takes a third, varargs of PosZDoubles
    to sum more than just two values, but with boxing.

 Added an overloaded PosZDouble.productOf method that takes 3 or more PosDoubles and
    computes the product.

Added a plus method to PosDouble that takes a PosZDouble and returns a PosDouble.

  Added sumOf methods to PosZDouble companion.

 Added plus method to PosFloat and sumOf to its companion object.

    Added plus method to PosZFloat and sumOf method to its companion.

All the wait are these deprecations or movements? such as org.scalatest.prop to org.scalatestplus.scalacheck

Added tryingValid and passOrElse methods to PosInt.

Added a goodOrElse method to PosInt.

 Added a rightOrElse method.

Changed the *Macro objects from private[scalactic] to private[anyvals], because I noticed
    these showed up in the REPL when doing import org.scalactic.anyvals. then hitting tab.
    It was always supposed to be private[anyvals], but that slipped through. It should not
    break any user code because no one should be inserting something into the org.scalactic
    package anyway.

Not sure this is a refactor or new:  floor and round method of PosFloat and PosDouble should return PosZFloat PosZDouble.

Added Present! (but removed it later)

  Implemented Future version of forAtLeast in InspectorAsserting.

This is interesting:
 Changed some of async methods implementation to run in serial to have consistent behaviour with the blocking cousin.

 Completed asynchronous support for Inspectors.


Initial version of asynchronous TableAsserting.

Moved org.scalactic.Chain as org.scalactic.anyvals.NonEmptyList, create a deprecated Chain alias in org.scalactic.

 Made ScreenshotCapturer public.

 Added TestsBeforeNestedSuiteSpec.
(did I add a  Added TestsBeforeNestedSuite trait somewhere hidden in an earlier commit?)


 Avoid race condition in Timed.scala as described in https://github.com/scalatest/scalatest/issues/1147


Check RegexString to make sure it is good enough to release.


    Initial version of ultimately, which is an async eventually.


Ah, async eventually named ultimately.

DId we add support for Scala Native in  3.1.x? Yes, I think so. o

 Made ScreenshotCapturer public.

We removed Suite (which become RefSpec) from any of our test classes.

 Added JSON support to events and StringReporter What was that used for? Apparently for
things like: 

 describe("TestFailed event") {
+
+    it("should return correct JSON in its toJson method") {


 Made MessageRecorder thread-safe.

This: Merge branch 'feature-cherry-pick-from-pr1246-to-3.1.x' into 3.1.x
May be about extracting default prettifier so it can be extended: https://github.com/scalatest/scalatest/pull/1246/commits

What are these:

Extends special handle of Predef string printing to scala 2.13 in RequirementsSpec.scala.
   
    * Extends special handle of Predef string printing to scala 2.13 in AssertionsSpec.scala.

Made changes to support Dotty, like explicit implicits.

 Added an apply method to Prettifier that takes two Any arguments and returns
    a PrettyPair, which I also just added. PrettyPair has two prettifier objects, which
    were found to be unequal, so the idea is that this new apply method on Prettifier
    will use the differences to help decide how to prettify them. For example in strings
    we could put the []'s in the right spots. Or for long strings we can shorten them
    and highlight just the part (or at least the first part) that is different. And
    there's also a hint string in PrettyPair, that can be used to give info about
    the difference.


  Added analysis field to TestFailed event, and display the analysis in StringReporter.


Moved implementation code in Eventually to Retrying type class.
Wonder why we did the above. Ah, may e for sharing code with Ultimately.


 Changed Framework and ScalaTestFramework to set spanScaleFactor for Runner object instance for different Runner using different class loader.
I think the above was a bug fix?


    Removed SeveredStackTraces from scala-js, as it won't work in node-js due to lack of original stack trace after linked.
Was SeveredStackTraces in 3.0.x?

 Changed 'extends Element with ValueElement' to just 'extends ValueElement' in WebBrowser.scala.
The previous one may not need to be mentioned.

Added -P support to Framework, which allows specifying number of threads to use for thread pool used to run ParallelTestExecution suites.

Changed -P option to accept C appended to it, and reject negative thread number passed to -P.

Added support of skipping JDK check with scalatest.skip.jdk.check java property.
What was the above one for?

Moved style traits, and prepended Any to plain old styles.

 Adjusted styleName handling for FunSuite style trait
I wonder what above was.

 Deprecated styleName and chosen style, stating chosen style will be removed in future version of ScalaTest in favor of style trait modules.

    Ported test count fix in scala-js to scala-native.
Might be a bug fix worth mentioning in Scala.js.


Wrap <script> sections of HtmlReporter in <![CDATA[]]>

    One of the sections had an unescaped &, which trips up browsers when the
    generated files are presented as XML/XHTML.

    Preventively, this wraps the two longer <script> elements in a CDATA
    block, even if only one currently needs a fix.

Oh, I wonder if the previous one is what broke HTML reporter. It is from Mar 28, 2017, but merged in Mayish 2018.

 Initial version that works with partial unification.

Re-organize implicits in Aggregating and Containing in different levels to improve compile time.
 What was that about?


follow collection design in 2.13.0-M4
 Probably want to mention we did this.

Look for Array.deep examples in Scaladoc.

Removed parser combinator source code, made common-test to use combinator parser 1.1.1 instead.
 This may be internal.

 Replaced all LinkedList with ListBuffer.
 Why did we do this? Speed?

A ton of work to get ScalaTest to work with 2.13 collections.

Allow -T argument to be used in SBT.
 Forget what -T is for.

Removed until and to function in Float and Double anyvals.
 I am hoping we deprecated these. This we did because they were removed in 2.13.

Replaced internal uses of ScalaCheck with our own Generator (still private) so we don't
have to wait for ScalaCheck when a new version of Scala comes out.

A lot of stuff to support Dotty.

What's this about:
Added Any as type for K and V for GenMapDiffer companion object.

Added Differ, Prettifier and PrettyPair to scalacticDotty module.
  Are these new in 3.1.0?

 Ported over from 3.2.x: Added -S argument to allow setting of fixed init seed.
 Oh, but this is probably will be hidden in 3.1.0.

 Moved classes in org.scalatest.jmock to org.scalatestplus.jmock, leaving deprecated type alias in the original package.

Moved classes in org.scalatest.easymock to org.scalatestplus.easymock, leaving deprecated type alias in the original package.

 Moved classes in org.scalatest.mockito to org.scalatestplus.mockito, leaving deprecated type alias in the original package.

Moved classes in org.scalatest.selenium to org.scalatestplus.selenium, leaving deprecated type alias in the original package.

Make WebBrowser access to internal ScreenshotCapturer class through ScalaTestInternals.
What was this one about?


Moved classes in org.scalatest.junit to org.scalatestplus.junit, leaving deprecated type alias in the original package.

Moved classes in org.scalatest.testng to org.scalatestplus.testng, leaving deprecated type alias in the original package.


    Go in other direction with Collected. Make it public, which a is non-breaking change.
    It had bled out into the public previously anyway, and this way it is non-breaking.
 Hmm. What was that about?


Removed deprecations in org.scalatest.prop.Configuration, to facilitate cleaner package migration of ScalaCheck classes from org.scalatest.prop to org.scalatestplus.scalacheck.
  Check to see if anything else that was deprecated long ago can be removed. Make sure we list everything that has been removed.

Removed scala-xml dependency from scalacticDotty.
  Did we do anything overall with XML?

add _root_ to the macros defined in TypeMatcherMacro
  by  Bruno Bonanno so a bug fix

    Changed Framework to flavour @WrapWith when it is available, consistent with behaviour of ScalaTestFramework and Runner.
     This probably was a bug fix.

 resolve #1201 replace pegdown with flexmark-java

Fixed javascript error in report files generated by HtmlReporter.
  I think this was in 3.0.8 too though.

*@
}
